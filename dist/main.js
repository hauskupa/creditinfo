(()=>{function b(){var e;let r=document.querySelector("[data-subnav]"),c=r&&r.querySelector("[data-underline]");if(!r||!c)return;let a=[...r.querySelectorAll('[data-subnav-link][href^="#"]')].map(t=>{let o=t.getAttribute("href").slice(1),s=document.getElementById(o);return s?{a:t,id:o,sec:s}:null}).filter(Boolean);if(!a.length)return;let l=(t=>parseFloat(t)||0)(r.getAttribute("data-scroll-offset")),y=((e=document.querySelector(".nav_component"))==null?void 0:e.offsetHeight)||0,g=l||y,f=[],w=()=>{f=a.map(t=>t.sec.getBoundingClientRect().top+window.scrollY),m()};function d(t){let o=t.getBoundingClientRect(),s=r.getBoundingClientRect(),v=o.left-s.left+o.width*.5;c.style.left="0px",c.style.width=v+"px"}function h(t){a.forEach(s=>s.a.removeAttribute("aria-current"));let o=a[t].a;o.setAttribute("aria-current","page"),d(o)}function m(){let t=window.scrollY+g+1,o=0;for(let s=0;s<f.length&&f[s]<=t;s++)o=s;h(o)}a.forEach((t,o)=>{t.a.addEventListener("click",s=>{s.preventDefault();let v=f[o]-g;window.scrollTo({top:v,behavior:"smooth"}),history.replaceState(null,"","#"+t.id),h(o)}),t.a.addEventListener("mouseenter",()=>d(t.a)),t.a.addEventListener("focus",()=>d(t.a))}),r.addEventListener("mouseleave",m);let p=!1,n=()=>{p||(p=!0,requestAnimationFrame(()=>{m(),p=!1}))};window.addEventListener("load",()=>{w(),m()}),window.addEventListener("resize",w),window.addEventListener("scroll",n,{passive:!0})}function A(){let r=i=>String(i||"").toLowerCase().replace(/\/+$/,""),c=r(location.pathname);document.querySelectorAll("[data-mainnav-link]").forEach(i=>{let a=i.getAttribute("href")||"",u=i.getAttribute("data-section")||a,l=r(u);if(!l)return;(l===""||l==="/"?c===""||c==="/":c.startsWith(l))?i.setAttribute("data-active","true"):i.removeAttribute("data-active")})}(()=>{let r=document.querySelector("[data-filter-dropdown]");if(!r)return;console.log("[filter] boot");let c=n=>(n||"").normalize("NFKD").replace(/\u00A0/g," ").replace(/\s+/g," ").trim().toLowerCase(),i=r.querySelector("[data-filter-toggle], .w-dropdown-toggle"),a=r.querySelector("[data-filter-menu], .w-dropdown-list");if(!i||!a){console.warn("[filter] missing toggle/menu");return}let u=i.firstElementChild||i,l=(n,e)=>{var o;let t=c(n)==="*"?"All regions":((o=e==null?void 0:e.textContent)==null?void 0:o.trim())||n;u instanceof HTMLInputElement?u.value=t:u.textContent=t},y=()=>{let n=e=>!e.closest("[data-filter-dropdown]");return[...document.querySelectorAll(".job-card")].map(e=>e.closest("[data-card], [role='listitem']")||e).filter(n)},g=n=>{var s;let e=n.querySelector("[data-location]")||n.querySelector(".job-card [data-location]"),t=e==null?void 0:e.getAttribute("data-location");if(t)return c(t);let o=(s=n.querySelector(".job-card-pre-heading"))==null?void 0:s.textContent;return o&&o.trim()?c(o):c(n.textContent||"")},f=n=>n.style.setProperty("display","none","important"),w=n=>n.style.removeProperty("display"),d=n=>{let e=c(n),t=!e||e==="*",o=y(),s=0;o.forEach(v=>{let L=g(v),E=t||L===e||L.includes(e);(E?w:f)(v),E&&s++}),console.log("[filter] value:",t?"*":n,"shown:",s,"/",o.length)},h=()=>{r.classList.remove("w--open"),a.style.removeProperty("display"),requestAnimationFrame(()=>{var n;(n=i==null?void 0:i.click)==null||n.call(i),setTimeout(()=>{r.classList.remove("w--open"),a.style.removeProperty("display")},20)})};r.addEventListener("click",n=>{let e=n.target.closest("[data-filter]");if(!e||!r.contains(e))return;let t=(e.getAttribute("data-filter")||"*").trim();r.dataset.selected=t,l(t,e),d(t),h()},!0);let m=0,p=()=>{if(y().length){let e=r.dataset.selected||"*";r.dataset.selected=e,l(e),d(e)}else m++<30&&setTimeout(p,100)};p(),new MutationObserver(()=>{d(r.dataset.selected||"*")}).observe(document.documentElement,{childList:!0,subtree:!0})})();document.addEventListener("DOMContentLoaded",()=>{A(),b()});})();
